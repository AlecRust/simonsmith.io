!function(){var e,t,n,r,i,s,o,a,l,c,u,p,d,h=[].slice;i="2.1.0",t="pending",r="resolved",n="rejected",l=function(e,t){return null!=e?e.hasOwnProperty(t):void 0},u=function(e){return l(e,"length")&&l(e,"callee")},a=function(e){return u(e)?a(Array.prototype.slice.call(e)):Array.isArray(e)?e.reduce(function(e,t){return Array.isArray(t)?e.concat(a(t)):(e.push(t),e)},[]):[e]},s=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},p=function(e,t){return function(){var n;return n=[e].concat(Array.prototype.slice.call(arguments,0)),t.apply(this,n)}},o=function(e,t,n){var r,i,s,o,l;for(o=a(e),l=[],i=0,s=o.length;s>i;i++)r=o[i],l.push(r.call.apply(r,[n].concat(h.call(t))));return l},e=function(){var i,s,c,u,p;return this.isPromise=function(){return!0},p=t,c=[],u=[],s={},this.promise=function(i){var d,f;return i=i||{},i.state=function(){return p},f=function(e,n){return function(){return p===t&&n.push.apply(n,a(arguments)),e()&&o(arguments,s),i}},i.done=f(function(){return p===r},c),i.fail=f(function(){return p===n},u),i.always=function(){var e;return(e=i.done.apply(i,arguments)).fail.apply(e,arguments)},d=function(t,n){var r,s;return r=new e,s=function(e,t,n){return n?i[e](function(){var r,i;return r=1<=arguments.length?h.call(arguments,0):[],i=n.apply(null,r),l(i,"isPromise")&&i.isPromise()?i[e](function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t.apply(null,e)}):t(i)}):i[e](function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t.apply(null,e)})},s("done",r.resolve,t),s("fail",r.reject,n),r},i.pipe=d,i.then=d,i},this.promise(this),i=function(e,n,r){return function(){return p===t&&(p=e,s=arguments,o(n,s,r)),this}},this.resolve=i(r,c),this.reject=i(n,u),this.resolveWith=function(){var e,t;return t=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],i(r,c,t).apply(null,e)},this.rejectWith=function(){var e,t;return t=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],i(n,u,t).apply(null,e)},this},d=function(){var t,n,r,i,o,l,c;for(o=new e,n=a(arguments),1===n.length?n[0].done(function(){return o.resolve.apply(o,arguments)}):(i=[],r=s(n.length,function(){return o.resolve.apply(o,i)}),n.forEach(function(e,t){return e.done(function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],i[t]=e,r()})})),l=0,c=n.length;c>l;l++)t=n[l],t.fail(o.reject);return o.promise()},c=function(t){return t.Deferred=function(){return new e},t.ajax=p(t.ajax,function(t,n){var r,i,s,o;return null==n&&(n={}),i=new e,r=function(e,t){return p(e,function(){var e,n;return n=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],n&&n.apply(null,e),t.apply(null,e)})},n.success=r(n.success,i.resolve),n.error=r(n.error,i.reject),o=t(n),s=i.promise(),s.abort=function(){return o.abort()},s}),t.when=d},"undefined"!=typeof exports?(exports.Deferred=function(){return new e},exports.when=d,exports.installInto=c):(this.Deferred=function(){return new e},this.Deferred.when=d,this.Deferred.installInto=c)}.call(this);